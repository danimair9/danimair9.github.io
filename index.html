<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="jquery input-counter example">

    <title>T-Counter</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
          crossorigin="anonymous">
    <!-- FontAwesome core CSS -->
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN"
          crossorigin="anonymous">

    <!-- Custom styles for this template -->
    <style>
    body{
        background-color: #00BCD4;
        padding: 70px;
    }

    @media only screen and (max-width:400px) {
        body{
            padding: 20px;
        }
    }
</style>
</head>

<body onload="fetchFromApi();">

<div class="position-relative overflow-hidden p-3 p-md-6 m-md-3 text-center bg-light" style="border-radius: 15px;">
    <h1>Trichter Counter</h1>
    <br>
    <h2>Gesamt:</h2><h2 id="counter-sum">0</h2>

    <div class="col-md-5 p-lg-5 mx-auto my-5">
        <h3>Flo</h3>
        <div class="input-counter input-group">
            <div class="input-group-prepend">
                <button type="button" class="btn-subtract btn btn-primary">
                    <i class="fa fa-minus"></i>
                </button>
            </div>
            <input id="inputFlo" type="text" class="form-control counter" data-default="0" data-min="0">
            <div class="input-group-append">
                <button type="button" class="btn-add btn btn-primary">
                    <i class="fa fa-plus"></i>
                </button>
            </div>
        </div>
        <br />
        <br />
        <h3>Matze</h3>
        <div class="input-counter input-group">
            <div class="input-group-prepend">
                <button type="button" class="btn-subtract btn btn-primary">
                    <i class="fa fa-minus"></i>
                </button>
            </div>
            <input id="inputMatze" type="text" class="form-control counter" data-default="0" data-min="0">
            <div class="input-group-append">
                <button type="button" class="btn-add btn btn-primary">
                    <i class="fa fa-plus"></i>
                </button>
            </div>
        </div>
        <br />
        <br />
        <h3>Felix</h3>
        <div class="input-counter input-group">
            <div class="input-group-prepend">
                <button type="button" class="btn-subtract btn btn-primary">
                    <i class="fa fa-minus"></i>
                </button>
            </div>
            <input id="inputFelix" type="text" class="form-control counter" data-default="0" data-min="0">
            <div class="input-group-append">
                <button type="button" class="btn-add btn btn-primary">
                    <i class="fa fa-plus"></i>
                </button>
            </div>
        </div>
        <br />
        <br />
        <h3>Covi</h3>
        <div class="input-counter input-group">
            <div class="input-group-prepend">
                <button type="button" class="btn-subtract btn btn-primary">
                    <i class="fa fa-minus"></i>
                </button>
            </div>
            <input id="inputCovi" type="text" class="form-control counter" data-default="0" data-min="0">
            <div class="input-group-append">
                <button type="button" class="btn-add btn btn-primary">
                    <i class="fa fa-plus"></i>
                </button>
            </div>
        </div>
        <br />
        <br />
        <h3>Alex</h3>
        <div class="input-counter input-group">
            <div class="input-group-prepend">
                <button type="button" class="btn-subtract btn btn-primary">
                    <i class="fa fa-minus"></i>
                </button>
            </div>
            <input id="inputAlex" type="text" class="form-control counter" data-default="0" data-min="0">
            <div class="input-group-append">
                <button type="button" class="btn-add btn btn-primary">
                    <i class="fa fa-plus"></i>
                </button>
            </div>
        </div>
        <br />
        <br />
        <h3>Dani</h3>
        <div class="input-counter input-group">
            <div class="input-group-prepend">
                <button type="button" class="btn-subtract btn btn-primary">
                    <i class="fa fa-minus"></i>
                </button>
            </div>
            <input id="inputDani" type="text" class="form-control counter" data-default="0" data-min="0">
            <div class="input-group-append">
                <button type="button" class="btn-add btn btn-primary">
                    <i class="fa fa-plus"></i>
                </button>
            </div>
        </div>
        <br />
        <br />
        <h3>Gast-Trinker</h3>
        <div class="input-counter input-group">
            <div class="input-group-prepend">
                <button type="button" class="btn-subtract btn btn-primary">
                    <i class="fa fa-minus"></i>
                </button>
            </div>
            <input id="inputGuest" type="text" class="form-control counter" data-default="0" data-min="0">
            <div class="input-group-append">
                <button type="button" class="btn-add btn btn-primary">
                    <i class="fa fa-plus"></i>
                </button>
            </div>
        </div>
        <br />
        <br />
    </div>
</div>

<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T"
        crossorigin="anonymous"></script>

<script src="dist/js/jquery.input-counter.js"></script>
<script src="dist/js/APIRequest.js"></script>
<script>
    var options = {
        selectors: {
            addButtonSelector: '.btn-add',
            subtractButtonSelector: '.btn-subtract',
            inputSelector: '.counter',
        },
        settings: {
            checkValue: true,
            isReadOnly: true,
        },
    };

    function updateSum(){
        var sum = 0;
        for(i = 0; i<=6 ; i++) {
            sum += parseInt(document.getElementsByTagName("input")[i].value);
        }
        document.getElementById("counter-sum").innerText = sum;
    }

    function fetchFromApi(){
        var number = httpGet("b94b7e94");
        document.getElementById("inputFlo").value = parseInt(number);

        number = httpGet("129ca4a9");
        document.getElementById("inputMatze").value = parseInt(number);

        number = httpGet("6affc93a");
        document.getElementById("inputFelix").value = parseInt(number);

        number = httpGet("f65cc01a");
        document.getElementById("inputCovi").value = parseInt(number);

        number = httpGet("93587e8f");
        document.getElementById("inputAlex").value = parseInt(number);

        number = httpGet("f0a68318");
        document.getElementById("inputDani").value = parseInt(number);

        number = httpGet("27e32246");
        document.getElementById("inputGuest").value = parseInt(number);

        updateSum();
    }
    
    function pushToAPI() {

        var number = document.getElementById("inputFlo").value;
        httpPOST("b94b7e94",number);

        number = document.getElementById("inputMatze").value;
        httpPOST("129ca4a9",number);

        number = document.getElementById("inputFelix").value;
        httpPOST("6affc93a",number);

        number = document.getElementById("inputCovi").value;
        httpPOST("f65cc01a",number);

        number = document.getElementById("inputAlex").value;
        httpPOST("93587e8f",number);

        number = document.getElementById("inputDani").value;
        httpPOST("f0a68318",number);

        number = document.getElementById("inputGuest").value;
        httpPOST("27e32246",number);

    }

    function httpGet(tocken)
    {
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.open( "GET", "https://api.keyvalue.xyz/"+tocken+"/myKey", false ); // false for synchronous request
        xmlHttp.send( null );
        return xmlHttp.responseText;
    }

    function httpPOST(tocken, number)
    {
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.open( "POST", "https://api.keyvalue.xyz/"+tocken+"/myKey/"+number, false ); // false for synchronous request
        xmlHttp.send( null );
    }



    $(".input-counter").inputCounter(options);
</script>
<style>
    .form-control.counter{
        text-align: center;
    }


</style>
</body>
</html>
